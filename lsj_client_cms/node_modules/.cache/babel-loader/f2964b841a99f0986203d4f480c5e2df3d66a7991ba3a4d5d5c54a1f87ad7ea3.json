{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Comment from \"@/components/Comment\";\nexport default {\n  name: \"GoodsDetail\",\n  components: {\n    Comment\n  },\n  data() {\n    return {\n      id: this.$route.query.id,\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      goods: {},\n      current: '物品详情',\n      form: {},\n      fromVisible: false,\n      addressList: []\n    };\n  },\n  created() {\n    this.$request.put('/goods/updateReadCount/' + this.id).then(res => {\n      this.load();\n    });\n  },\n  methods: {\n    addOrder() {\n      this.form.goodsId = this.id;\n      this.$request.post('/orders/add', this.form).then(res => {\n        if (res.code === '200') {\n          this.$message.success('下单成功');\n          this.$router.push('/front/orders');\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    handleBuy() {\n      this.form = {};\n      this.fromVisible = true;\n      this.addOrder();\n    },\n    addCollect() {\n      this.$request.post('/collect/add', {\n        fid: this.goods.id,\n        module: 'goods'\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success('操作成功');\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    addLikes() {\n      this.$request.post('/likes/add', {\n        fid: this.goods.id,\n        module: 'goods'\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success('操作成功');\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    changeItem(current) {\n      this.current = current;\n    },\n    load() {\n      this.$request.get('/goods/selectById/' + this.id).then(res => {\n        this.goods = res.data || {};\n      });\n    }\n  }\n};","map":{"version":3,"names":["Comment","name","components","data","id","$route","query","user","JSON","parse","localStorage","getItem","goods","current","form","fromVisible","addressList","created","$request","put","then","res","load","methods","addOrder","goodsId","post","code","$message","success","$router","push","error","msg","handleBuy","addCollect","fid","module","addLikes","changeItem","get"],"sources":["src/views/front/GoodsDetail.vue"],"sourcesContent":["<template>\r\n  <div style=\"margin: 0 auto; padding: 10px 0; width: 50%\">\r\n    <div style=\"display: flex; grid-gap: 20px; margin-bottom: 40px\">\r\n      <img :src=\"goods.img\" alt=\"\" style=\"width: 50%; height: 400px; display: block\">\r\n      <div style=\"flex: 1; width: 0\" >\r\n        <el-tooltip :content=\"goods.name\" placement=\"top-start\">\r\n          <div style=\"width: 100%; font-weight: bold; font-size: 26px; margin: 20px 0\" class=\"line1\">{{ goods.name }}</div>\r\n        </el-tooltip>\r\n        <div style=\"color: #464646; font-size: 16px;\">\r\n          <span>浏览 {{ goods.readCount }}</span>\r\n          <span style=\"margin-left: 20px\">点赞 {{ goods.likesCount }}</span>\r\n          <span style=\"margin-left: 20px\">收藏 {{ goods.collectCount }}</span>\r\n        </div>\r\n        <div style=\"color: red; font-size: 24px; margin: 40px 0\">￥{{ goods.price }}</div>\r\n        <div style=\"margin-bottom: 20px\"><span style=\"color: #666\">种类：</span> {{ goods.category}}</div>\r\n        <div style=\"margin-bottom: 40px\"><span style=\"color: #666\">发布日期：</span> {{ goods.date }}</div>\r\n        <div>\r\n          <el-button v-if=\"!goods.userLikes\" @click=\"addLikes\" size=\"medium\" >点赞</el-button>\r\n          <el-button v-if=\"goods.userLikes\" @click=\"addLikes\" size=\"medium\" ><i class=\"el-icon-caret-top\"></i>已点赞</el-button>\r\n          <el-button v-if=\"!goods.userCollect\" @click=\"addCollect\" size=\"medium\"><i class=\"el-icon-star-off\"></i>收藏</el-button>\r\n          <el-button v-if=\"goods.userCollect\" @click=\"addCollect\" size=\"medium\"><i class=\"el-icon-star-on\"></i>已收藏</el-button>\r\n          <el-button size=\"medium\"  @click=\"handleBuy\">立即购买</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div>\r\n      <div style=\"display: flex; border-bottom: 1px solid #464646; margin-bottom: 10px\">\r\n        <div style=\"padding: 10px 20px; cursor: pointer\" :class=\"{ 'active' : current === '物品详情' }\" @click=\"changeItem('物品详情')\">物品详情</div>\r\n        <div style=\"padding: 10px 20px; cursor: pointer\" :class=\"{ 'active' : current === '物品评论' }\" @click=\"changeItem('物品评论')\">物品评论</div>\r\n      </div>\r\n\r\n      <div v-if=\"current === '物品详情'\">\r\n        <div v-html=\"goods.content\"></div>\r\n      </div>\r\n\r\n      <div v-if=\"current === '物品评论'\" class=\"card\">\r\n        <Comment :fid=\"id\" module=\"goods\" />\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Comment from \"@/components/Comment\";\r\nexport default {\r\n  name: \"GoodsDetail\",\r\n  components: {Comment},\r\n  data() {\r\n    return {\r\n      id: this.$route.query.id,\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      goods: {},\r\n      current: '物品详情',\r\n      form: {},\r\n      fromVisible: false,\r\n      addressList: []\r\n    }\r\n  },\r\n  created() {\r\n    this.$request.put('/goods/updateReadCount/' + this.id).then(res => {\r\n      this.load()\r\n    })\r\n  },\r\n  methods: {\r\n    addOrder() {\r\n      this.form.goodsId = this.id\r\n      this.$request.post('/orders/add', this.form).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success('下单成功')\r\n          this.$router.push('/front/orders')\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    handleBuy() {\r\n      this.form = {}\r\n      this.fromVisible = true\r\n      this.addOrder();\r\n    },\r\n    addCollect() {\r\n      this.$request.post('/collect/add', { fid: this.goods.id, module: 'goods' }).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success('操作成功')\r\n          this.load()\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    addLikes() {\r\n      this.$request.post('/likes/add', { fid: this.goods.id, module: 'goods' }).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success('操作成功')\r\n          this.load()\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    changeItem(current) {\r\n      this.current = current\r\n    },\r\n    load() {\r\n      this.$request.get('/goods/selectById/' + this.id).then(res => {\r\n        this.goods = res.data || {}\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.active {\r\n  background-color: #464646;\r\n  color: #eee;\r\n}\r\n</style>"],"mappings":";AA6CA,OAAAA,OAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,EAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,EAAA;MACAG,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,KAAA;MACAC,OAAA;MACAC,IAAA;MACAC,WAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA,CAAAC,GAAA,kCAAAf,EAAA,EAAAgB,IAAA,CAAAC,GAAA;MACA,KAAAC,IAAA;IACA;EACA;EACAC,OAAA;IACAC,SAAA;MACA,KAAAV,IAAA,CAAAW,OAAA,QAAArB,EAAA;MACA,KAAAc,QAAA,CAAAQ,IAAA,qBAAAZ,IAAA,EAAAM,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAM,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA;UACA,KAAAH,QAAA,CAAAI,KAAA,CAAAX,GAAA,CAAAY,GAAA;QACA;MACA;IACA;IACAC,UAAA;MACA,KAAApB,IAAA;MACA,KAAAC,WAAA;MACA,KAAAS,QAAA;IACA;IACAW,WAAA;MACA,KAAAjB,QAAA,CAAAQ,IAAA;QAAAU,GAAA,OAAAxB,KAAA,CAAAR,EAAA;QAAAiC,MAAA;MAAA,GAAAjB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAM,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAAP,IAAA;QACA;UACA,KAAAM,QAAA,CAAAI,KAAA,CAAAX,GAAA,CAAAY,GAAA;QACA;MACA;IACA;IACAK,SAAA;MACA,KAAApB,QAAA,CAAAQ,IAAA;QAAAU,GAAA,OAAAxB,KAAA,CAAAR,EAAA;QAAAiC,MAAA;MAAA,GAAAjB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAM,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAAP,IAAA;QACA;UACA,KAAAM,QAAA,CAAAI,KAAA,CAAAX,GAAA,CAAAY,GAAA;QACA;MACA;IACA;IACAM,WAAA1B,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;IACA;IACAS,KAAA;MACA,KAAAJ,QAAA,CAAAsB,GAAA,6BAAApC,EAAA,EAAAgB,IAAA,CAAAC,GAAA;QACA,KAAAT,KAAA,GAAAS,GAAA,CAAAlB,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}